<div
    *ngIf="false && !todo"
    fxLayout="column"
    fxLayoutAlign="center center"
    fxFlex
>
    <mat-icon
        class="s-120 mb-12 select-todo-icon hint-text"
        [@animate]="{ value: '*', params: { delay: '300ms', scale: '0.2' } }"
        >check_box
    </mat-icon>
    <span
        class="hint-text mat-h1 select-todo-text"
        [@animate]="{ value: '*', params: { delay: '400ms' } }"
    >
        No Target Price
    </span>
</div>

<div>
    <div
        class="todo-header"
        fxLayout="row"
        fxLayoutAlign="space-between center"
    >
        <button
            mat-button
            class="toggle-complete-button"
            aria-label="Toggle completed"
            fxFlex="0 1 auto"
        >
            <!-- <mat-icon *ngIf="todo.completed">check_box</mat-icon>
            <mat-icon *ngIf="!todo.completed">check_box_outline_blank</mat-icon> -->
            <span class="ml-8">Opportunity Target Prices</span>
        </button>

        <!-- {{currentEntity | json}} -->
        
        <div class="actions" fxLayout="row" fxLayoutAlign="start center">

            <a mat-icon-button
                    class="secondary-text"
               [routerLink]="[]" [queryParams]="{newtargetprice: true}" queryParamsHandling="merge"
               matTooltip="New Target Price"
               [attr.aria-label]="'New Target Price'">
                <mat-icon>add</mat-icon>
            </a>

            <!--<button mat-icon-button (click)="toggleStar($event)" aria-label="Toggle star">
        <mat-icon class="amber-fg" *ngIf="todo.starred">star</mat-icon>
        <mat-icon class="secondary-text" *ngIf="!todo.starred">star_border</mat-icon>
    </button>

    <button mat-icon-button [matMenuTriggerFor]="labelMenu" fxFlex="0 1 auto">
        <mat-icon class="secondary-text">label</mat-icon>
    </button>

    <mat-menu #labelMenu="matMenu">
        <button mat-menu-item *ngFor="let tag of tags"
                (click)="toggleTagOnTodo(tag.id)">
            <mat-icon *ngIf="hasTag(tag.id)">check</mat-icon>
            <mat-icon *ngIf="!hasTag(tag.id)"></mat-icon>
            <span>{{tag.title}}</span>
        </button>
    </mat-menu>

    <button mat-icon-button (click)="toggleDeleted($event)" aria-label="Toggle delete">
        <mat-icon class="secondary-text" *ngIf="todo.deleted">delete_forever</mat-icon>
        <mat-icon class="secondary-text" *ngIf="!todo.deleted">delete</mat-icon>
    </button>-->

        </div>
    </div>

    <div class="todo-content">
        <!--<pre>{{currentEntity | json}}</pre>-->
        <div class="tags targetprices mb-24">
            <mat-list fxFlex="100" fxLayout="column" fxLayoutAlign="stretch">
                <mat-list-item class="targetprice" (click)="currentTargetPrice = targetPrice" [attr.color]="currentTargetPrice == targetPrice ? 'primary' : ''" *ngFor="let targetPrice of currentEntity.targetPrices">
                    <mat-icon mat-list-icon class="material-icons-outlined">folder</mat-icon>
                    <h4 mat-line>{{targetPrice.name || 'No Name'}} ({{targetPrice.seasonName}})</h4>
                    <section mat-line fxLayoutGap="20px">
                        <span fxFlex="30%">
                            <mark>$ {{targetPrice.targetPrice}}</mark>
                        </span>
                        <span fxFlex="30%" [ngClass]="{'green-900-fg': targetPrice.saleOpportunityTargetPriceProducts.length >= targetPrice.alternativesAmount, 'red-900-fg': targetPrice.saleOpportunityTargetPriceProducts.length < targetPrice.alternativesAmount}" >
                            {{targetPrice.saleOpportunityTargetPriceProducts.length}}/{{targetPrice.alternativesAmount}}
                        </span>
                    </section>
                </mat-list-item>
                <mat-divider></mat-divider>
            </mat-list>
            <!--<div
        class="samplebox"
        *ngFor="let sampleBox of currentEntity.sampleBoxes"
        (click)="toggleSampleBox(sampleBox)"
    >
        <div class="samplebox-products">
            <div
                class="samplebox-product "
                *ngFor="
                    let sampleBoxProduct of sampleBox.sampleBoxProducts
                "
                (click)="toggleSampleBox(sampleBox)"
            >
                <img class="avatar" [src]="(sampleBoxProduct.pictureId | fileUrl:'assets/images/avatars/product1.png':false | async)">
        </div>

        </div>
    </div>-->
            <!-- <mat-form-field appearance="outline" class="title mt-8" fxFill>
        <mat-label>Title</mat-label>
        <textarea matInput
                  #titleInput
                  name="title"
                  formControlName="title"
                  required>
        </textarea>
    </mat-form-field>

    <div class="dates" fxFlexFill fxLayout="column" fxLayout.gt-xs="row">

        <mat-form-field appearance="outline" class="mr-sm-12" fxFlex>
            <mat-label>Start Date</mat-label>
            <input matInput [matDatepicker]="startDatePicker">
            <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #startDatePicker></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="outline" class="ml-sm-12" fxFlex>
            <mat-label>Due Date</mat-label>
            <input matInput [matDatepicker]="dueDatePicker" placeholder="Due Date">
            <mat-datepicker-toggle matSuffix [for]="dueDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #dueDatePicker></mat-datepicker>
        </mat-form-field>

    </div>

    <mat-form-field appearance="outline" fxFill>
        <mat-label>Notes</mat-label>
        <textarea matInput #notes
                  name="notes"
                  formControlName="notes"
                  maxlength="500">
        </textarea>
        <mat-hint align="end">{{notes.value.length}} / 500</mat-hint>
    </mat-form-field>

    <button *ngIf="formType === 'new'"
            mat-raised-button color="accent"
            [disabled]="todoForm.invalid">
        SAVE
    </button> -->
        </div>
    </div>
</div>
